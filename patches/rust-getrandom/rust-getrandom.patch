From 7ffdb350f8bf10017165131c8433e8371df89754 Mon Sep 17 00:00:00 2001
From: Dennis Bonke <admin@dennisbonke.com>
Date: Mon, 7 Aug 2023 16:07:20 +0200
Subject: [PATCH] Add aero support

Signed-off-by: Dennis Bonke <admin@dennisbonke.com>
---
 src/lib.rs       | 2 +-
 src/use_file.rs  | 1 +
 src/util_libc.rs | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/lib.rs b/src/lib.rs
index 931856f..e700572 100644
--- a/src/lib.rs
+++ b/src/lib.rs
@@ -215,7 +215,7 @@ pub use crate::error::Error;
 // The function MUST NOT ever write uninitialized bytes into `dest`,
 // regardless of what value it returns.
 cfg_if! {
-    if #[cfg(any(target_os = "haiku", target_os = "redox", target_os = "nto", target_os = "aix"))] {
+    if #[cfg(any(target_os = "haiku", target_os = "redox", target_os = "nto", target_os = "aix", target_os = "aero"))] {
         mod util_libc;
         #[path = "use_file.rs"] mod imp;
     } else if #[cfg(any(target_os = "android", target_os = "linux"))] {
diff --git a/src/use_file.rs b/src/use_file.rs
index a6ef0d2..ef9bf54 100644
--- a/src/use_file.rs
+++ b/src/use_file.rs
@@ -33,6 +33,7 @@ const FILE_PATH: &str = "/dev/random\0";
     target_os = "haiku",
     target_os = "macos",
     target_os = "nto",
+    target_os = "aero",
 ))]
 const FILE_PATH: &str = "/dev/urandom\0";
 
diff --git a/src/util_libc.rs b/src/util_libc.rs
index de1455c..65bc1a6 100644
--- a/src/util_libc.rs
+++ b/src/util_libc.rs
@@ -19,7 +19,7 @@ use libc::c_void;
 cfg_if! {
     if #[cfg(any(target_os = "netbsd", target_os = "openbsd", target_os = "android"))] {
         use libc::__errno as errno_location;
-    } else if #[cfg(any(target_os = "linux", target_os = "emscripten", target_os = "redox"))] {
+    } else if #[cfg(any(target_os = "linux", target_os = "emscripten", target_os = "redox", target_os = "aero"))] {
         use libc::__errno_location as errno_location;
     } else if #[cfg(any(target_os = "solaris", target_os = "illumos"))] {
         use libc::___errno as errno_location;
-- 
2.42.0

